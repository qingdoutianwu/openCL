name: "Collapsed Tiles - Unlock Monitor (Final)"
desc: "严格参照范例修复：移除多余字段，使用在线图标，修复空白面板问题。"
icon: "checklist"

# ==========================================
# 界面配置 (Tiles)
# ⚠️ 注意：此处严禁添加 content 或 argument 字段
# ==========================================
tiles:
  - name: Netflix-Check
    title: Netflix
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png
    collapsed: true
    url: https://www.netflix.com

  - name: YouTube-Check
    title: YouTube
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png
    collapsed: true
    url: https://www.youtube.com/premium

  - name: Disney-Check
    title: Disney+
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Disney+.png
    collapsed: true
    url: https://www.disneyplus.com

  - name: Spotify-Check
    title: Spotify
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png
    collapsed: true
    url: https://open.spotify.com

  - name: ChatGPT-Check
    title: ChatGPT
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png
    collapsed: true
    url: https://chatgpt.com

  - name: Claude-Check
    title: Claude
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Claude.png
    collapsed: true
    url: https://claude.ai

  - name: HBO-Check
    title: HBO Max
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/HBO_Max.png
    collapsed: true
    url: https://www.max.com

  - name: Prime-Check
    title: Prime Video
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Amazon_Prime_Video.png
    collapsed: true
    url: https://www.primevideo.com

# ==========================================
# 脚本逻辑 (Script Providers)
# ==========================================
script-providers:
  Netflix-Check:
    interval: 86400
    content: |
      const url = "https://www.netflix.com/title/81215567";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "Netflix", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png" });
          return;
        }
        if (resp.status === 200) {
          $done({ title: "Netflix", content: "✅ Unlocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png" });
        } else if (resp.status === 404) {
          $done({ title: "Netflix", content: "❌ Original Only", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png" });
        } else {
          $done({ title: "Netflix", content: "❌ Blocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png" });
        }
      });

  YouTube-Check:
    interval: 86400
    content: |
      const url = "https://www.youtube.com/premium";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "YouTube", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png" });
          return;
        }
        const t = String(body || "").toLowerCase();
        if (resp.status >= 200 && resp.status < 400 && !t.includes("not available")) {
          $done({ title: "YouTube", content: "✅ Premium", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png" });
        } else {
          $done({ title: "YouTube", content: "❌ Geo Locked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png" });
        }
      });

  Disney-Check:
    interval: 86400
    content: |
      const url = "https://www.disneyplus.com/";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "Disney+", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Disney+.png" });
          return;
        }
        const t = String(body || "").toLowerCase();
        if (resp.status === 200 && !t.includes("not available in your region")) {
          $done({ title: "Disney+", content: "✅ Unlocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Disney+.png" });
        } else {
          $done({ title: "Disney+", content: "❌ Blocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Disney+.png" });
        }
      });

  Spotify-Check:
    interval: 86400
    content: |
      const url = "https://open.spotify.com";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "Spotify", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png" });
          return;
        }
        const t = String(body || "").toLowerCase();
        if (resp.status === 200 && !t.includes("not available")) {
          $done({ title: "Spotify", content: "✅ Unlocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png" });
        } else {
          $done({ title: "Spotify", content: "❌ Blocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png" });
        }
      });

  ChatGPT-Check:
    interval: 86400
    content: |
      const url = "https://chatgpt.com/";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "ChatGPT", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png" });
          return;
        }
        if (resp.status === 403) {
           $done({ title: "ChatGPT", content: "❌ Blocked (403)", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png" });
        } else if (resp.status >= 200 && resp.status < 400) {
           $done({ title: "ChatGPT", content: "✅ Reachable", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png" });
        } else {
           $done({ title: "ChatGPT", content: `❌ HTTP ${resp.status}`, icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png" });
        }
      });

  Claude-Check:
    interval: 86400
    content: |
      const url = "https://claude.ai/login";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "Claude", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Claude.png" });
          return;
        }
        const t = String(body || "").toLowerCase();
        if (resp.status === 403 || t.includes("app unavailable")) {
          $done({ title: "Claude", content: "❌ Geo Blocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Claude.png" });
        } else {
          $done({ title: "Claude", content: "✅ Reachable", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Claude.png" });
        }
      });

  HBO-Check:
    interval: 86400
    content: |
      const url = "https://www.max.com/";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
           $done({ title: "HBO Max", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/HBO_Max.png" });
           return;
        }
        const t = String(body || "").toLowerCase();
        if (resp.status === 200 && !t.includes("not available")) {
           $done({ title: "HBO Max", content: "✅ Unlocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/HBO_Max.png" });
        } else {
           $done({ title: "HBO Max", content: "❌ Geo Blocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/HBO_Max.png" });
        }
      });

  Prime-Check:
    interval: 86400
    content: |
      const url = "https://www.primevideo.com/";
      $httpClient.get({ url: url, headers: { "User-Agent": "Mozilla/5.0" }, timeout: 5000 }, (err, resp, body) => {
        if (err || !resp) {
          $done({ title: "Prime Video", content: "⚠️ Error", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Amazon_Prime_Video.png" });
          return;
        }
        const t = String(body || "").toLowerCase();
        const blocked = t.includes("not available") || t.includes("unavailable in your region");
        if (resp.status === 200 && !blocked) {
          $done({ title: "Prime Video", content: "✅ Unlocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Amazon_Prime_Video.png" });
        } else {
          $done({ title: "Prime Video", content: "❌ Geo Blocked", icon: "https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Amazon_Prime_Video.png" });
        }
      });
